

    
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://api.mapbox.com/mapbox-gl-js/v2.9.1/mapbox-gl.css" rel="stylesheet">
        <script src="https://api.mapbox.com/mapbox-gl-js/v2.9.1/mapbox-gl.js"></script>
        <script src="https://cdn.tailwindcss.com"></script>

    
        <style>
            #map { 
                position: relative;
                height: 90%;
                width: 100%;
            }
            .img-max {
                width:100%;
                height: 100%
                  }
        </style>
        

         <!-- Container for Heading -->
         <div class="w-6/6 flex">

          <!-- Container for Logo -->
          <div class="w-1/6 mt-4 flex justify-start">
          <img src="ca_logo.png" class="img-max mx-4 justify-start">
          </div>

          <!-- Container for buttons-->
          <div class="w-5/6 mt-4 flex justify-end">
              <!-- Buttons -->
            <div class="w-2/6 mx-4 mt-4 flex justify-end">
              <div class="inline-flex">
                  <button class="bg-gray-100 text-black py-2 px-4 rounded-l" id="west-btn" onclick="toggleWest()">
                    West Dallas
                  </button>
                  <button class="bg-gray-100 text-black py-2 px-4 rounded-r" id="south-btn" onclick="toggleSouth()">
                    South Dallas
                  </button>
                </div>
          </div>

          <!-- Toggle Past / Upcoming -->
          <div class="flex mx-4 mt-4 justify-end">
              <div>
                <div class="form-check">
                  <input class="form-check-input appearance-none h-4 w-4 border border-gray-300 rounded-sm bg-white checked:bg-red-600 checked:border-red-600 focus:outline-none transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer" type="checkbox" value="" id="checkUpcoming" onchange="toggleUpcoming()" checked="">
                  <label class="form-check-label inline-block text-gray-800" for="flexCheckDefault">
                    Upcoming Cases
                  </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input appearance-none h-4 w-4 border border-gray-300 rounded-sm bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer" type="checkbox" value="" id="checkPast" onchange="togglePast()" checked="">
                  <label class="form-check-label inline-block text-gray-800" for="flexCheckChecked">
                    Past Cases
                  </label>
                </div>
              </div>
            </div> 
        </div>
          </div>
            


        <!-- Map -->
        <div id="map" class="'w-2/3 mx-auto place-content-center mt-4 max-h-full"></div>

        <script>
            // The value for 'accessToken' begins with 'pk...'
            mapboxgl.accessToken = 'pk.eyJ1IjoiZ2FycmltIiwiYSI6ImNramc4aWRkMTE0ZzAyeXFwZG54eTFobnIifQ.zUa-muVxXAh3Dl6IJQY70g'; 
        
            const map = new mapboxgl.Map({
            container: 'map',
        
            // Replace YOUR_STYLE_URL with your style URL.
            style: 'mapbox://styles/garrim/cl5js8prj003d15pjrja960zv', 
            center: [-96.862, 32.780],
            zoom: 12.65
            });

map.on('load', function() {
    $('.mapboxgl-canvas').css('width', '100%');
    $('.mapboxgl-canvas').css('height', '100%');
    map.resize();
});
            map.on('click', (event) => {
                // If the user clicked on one of your markers, get its information.
                const features = map.queryRenderedFeatures(event.point, {
                  layers: ['West_Dallas','South_Dallas','West_Dallas_Upcoming','South_Dallas_Upcoming'] // layer names
                });
                if (!features.length) {
                  return;
                }
                const feature = features[0];
              
                const popup = new mapboxgl.Popup({ offset: [0, -15] })
                .setLngLat(feature.geometry.coordinates)
                .setHTML(
                `<h3 class="font-bold text-lg">${feature.properties["Address"]}</h3>
                <p>${feature.properties['Brief description']}
                <br>
                <a href="https://www.civicatlas.info/items/${feature.properties['Case No.']}"> More Information </a>`
                )
            
            .addTo(map);
              });
        </script>
        
        <script>
            
            //Start with West Dallas Toggled
            map.on('load', () => {
                toggleWest();
                toggleUpcoming();
            })

            map.on('render', () => {
                map.resize();
            })
            
            // Toggle South Dallas layer
            function toggleSouth() {
                if (document.getElementById('checkUpcoming').checked == true) {
                map.setLayoutProperty('South_Dallas_Upcoming', 'visibility', 'visible');
                map.setLayoutProperty('West_Dallas_Upcoming', 'visibility', 'none');
                console.log("success");
                }
                if (document.getElementById('checkPast').checked == true) {
                  map.setLayoutProperty('West_Dallas', 'visibility', 'none');
                  map.setLayoutProperty('South_Dallas', 'visibility', 'visible');
                  console.log("success");
                  }

                //map.setLayoutProperty('West_Dallas', 'visibility', 'none');
                //map.setLayoutProperty('South_Dallas', 'visibility', 'visible');
                map.flyTo({center: [-96.739, 32.766], zoom:11.5});
                document.getElementById("south-btn").className="bg-blue-500 text-white py-2 px-4 rounded-l";
                document.getElementById("west-btn").className="bg-gray-100 text-black py-2 px-4 rounded-l";
                console.log("success");
            }

             // Toggle West Dallas layer
             function toggleWest() {
                if (document.getElementById('checkUpcoming').checked == true) {
                map.setLayoutProperty('South_Dallas_Upcoming', 'visibility', 'none');
                map.setLayoutProperty('West_Dallas_Upcoming', 'visibility', 'visible');
                console.log("success");
                }
                if (document.getElementById('checkPast').checked == true) {
                  map.setLayoutProperty('West_Dallas', 'visibility', 'visible');
                  map.setLayoutProperty('South_Dallas', 'visibility', 'none');
                  console.log("success");
                  }
                //map.setLayoutProperty('West_Dallas', 'visibility', 'visible');
                //map.setLayoutProperty('South_Dallas', 'visibility', 'none');
                map.flyTo({center: [-96.862, 32.780], zoom:12.65});
                document.getElementById("south-btn").className="bg-gray-100 text-black py-2 px-4 rounded-l";
                document.getElementById("west-btn").className="bg-blue-500 text-white py-2 px-4 rounded-l";
                console.log("success");
            }

             // Toggle Past Cases
             function togglePast() {
                if (document.getElementById('checkPast').checked == true) {
                map.setLayoutProperty('West_Dallas', 'visibility', 'visible');
                map.setLayoutProperty('South_Dallas', 'visibility', 'visible');
                console.log("success");
                }
                else {
                map.setLayoutProperty('West_Dallas', 'visibility', 'none');
                map.setLayoutProperty('South_Dallas', 'visibility', 'none');
                }
            }
            
               // Toggle Upcoming Cases
               function toggleUpcoming() {
                if (document.getElementById('checkUpcoming').checked == true) {
                map.setLayoutProperty('West_Dallas_Upcoming', 'visibility', 'visible');
                map.setLayoutProperty('South_Dallas_Upcoming', 'visibility', 'visible');
                console.log("success");
                }
                else {
                map.setLayoutProperty('West_Dallas_Upcoming', 'visibility', 'none');
                map.setLayoutProperty('South_Dallas_Upcoming', 'visibility', 'none');
                }
            }


        </script>

    


    